# 1 : Spawn Bandits
# 2 : Clear Bandits
# 11-20 : Flavor Events
namespace = banditry

# Spawn Banditry
province_event = {
	id = banditry.1
	title = "banditry.1.title"
	desc = "banditry.1.desc"
	picture = VILLAGE_RAIDED_eventPicture

	trigger = {
		has_no_criminal_activity = { type = bandits }
		unrest = 6
		NOT = { units_in_province = owner }
	}

	mean_time_to_happen = {
		months = 3
		# Neighboring province with banditry will spread
		modifier = {
			factor = 0.1
			any_neighbor_province = { has_criminal_activity = { type = bandits } }
		}
		# More likely if no provinces have banditry
		modifier = {
			factor = 0.1
			owner = { any_owned_province = { NOT = { has_criminal_activity = { type = bandits } } } }
		}
	}
	is_mtth_scaled_to_size = 1

	immediate = {
		hidden_effect = {
			set_criminal_activity = { type = bandits }
			add_devastation = 25
		}
	}

	option = {
		name = "banditry.1.option.a"
		owner = { add_prestige = -1 }
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.1.option.b"
		ai_chance = { factor = 90 }
	}
}

# Despawn Banditry
province_event = {
	id = banditry.2
	title = "banditry.2.title"
	desc = "banditry.2.desc"
	picture = STREET_SPEECH_eventPicture

	trigger = {
		has_criminal_activity = { type = bandits }
		NOT = { current_crime_lvl = { amount = 5 } }
	}

	mean_time_to_happen = {
		months = 1
		modifier = {
			factor = 0.1
			units_in_province = owner
		}
		modifier = {
			factor = 0.1
			has_no_crime_lvl = yes
		}
	}
	is_mtth_scaled_to_size = 1

	immediate = {
		hidden_effect = {
			clear_criminal_activity = { type = bandits }
		}
	}

	option = {
		name = "banditry.2.option.a"
		owner = { add_prestige = 5 }
		ai_chance = { factor = 100 }
	}
}

# Raid in the Public Square
province_event = {
	id = banditry.11
	title = "banditry.11.title"
	desc = "banditry.11.desc"
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_province_modifier = {
				name = public_square_raided
				duration = 1825
			}
			add_devastation = 20
			increase_crime_lvl_small = yes
		}
	}

	option = {
		name = "banditry.11.option.a"
		owner = { add_prestige = -1 }
		add_nationalism = 10
		increase_crime_lvl_medium = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.11.option.b"
		owner = { add_years_of_income = -0.10 }
		reduce_crime_lvl = { amount = 2 }
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = { owner = { years_of_income = 0.10 } }
			}
		}
	}
}

# Raid on the Townsman Hearthstones
province_event = {
	id = banditry.12
	title = "banditry.12.title"
	desc = "banditry.12.desc"
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_province_modifier = {
				name = town_hearths_raided
				duration = 1825
			}
			add_devastation = 20
			increase_crime_lvl_small = yes
		}
	}

	option = {
		name = "banditry.12.option.a"
		owner = { add_prestige = -1 }
		add_local_autonomy = 25
		random_list = {
			33 = { add_base_tax = -1 }
			33 = { add_base_production = -1 }
			33 = { add_base_manpower = -1 }
		}
		increase_crime_lvl_medium = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.12.option.b"
		owner = { add_years_of_income = -0.35 }
		reduce_crime_lvl = { amount = 4 }
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = { owner = { years_of_income = 0.35 } }
			}
		}
	}
}

# Raid on the City Granaries
province_event = {
	id = banditry.13
	title = "banditry.13.title"
	desc = "banditry.13.desc"
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_province_modifier = {
				name = city_granaries_raided
				duration = 1825
			}
			add_devastation = 20
			increase_crime_lvl_small = yes
		}
	}

	option = {
		name = "banditry.13.option.a"
		owner = { add_prestige = -1 }
		add_unrest = 4
		increase_crime_lvl_medium = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.13.option.b"
		owner = { add_years_of_income = -0.20 }
		reduce_crime_lvl = { amount = 3 }
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = { owner = { years_of_income = 0.20 } }
			}
		}
	}
}

# Raid on the City Port
province_event = {
	id = banditry.14
	title = "banditry.14.title"
	desc = "banditry.14.desc"
	picture = HARBOUR_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_province_modifier = {
				name = city_port_raided
				duration = 1825
			}
			add_devastation = 20
			increase_crime_lvl_small = yes
		}
	}

	option = {
		name = "banditry.14.option.a"
		owner = { add_prestige = -1 }
		add_unrest = 2
		if = {
			limit = { province_has_center_of_trade_of_level = 2 }
			add_center_of_trade_level = -1
		}
		increase_crime_lvl_medium = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.14.option.b"
		owner = { add_years_of_income = -0.40 }
		reduce_crime_lvl = { amount = 2 }
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = { owner = { years_of_income = 0.40 } }
			}
		}
	}
}

# Raid on our Trading Routes
province_event = {
	id = banditry.15
	title = "banditry.15.title"
	desc = "banditry.15.desc"
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_province_modifier = {
				name = trade_route_raided
				duration = 1825
			}
			add_devastation = 20
			increase_crime_lvl_small = yes
		}
	}

	option = {
		name = "banditry.15.option.a"
		owner = { add_prestige = -1 }
		add_trade_modifier = {
			who = ROOT
			duration = 1825
			power = -5
			key = merchant_recalled
		}
		if = {
			limit = { province_has_center_of_trade_of_level = 2 }
			add_center_of_trade_level = -1
		}
		increase_crime_lvl_medium = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.15.option.b"
		owner = { add_years_of_income = -0.50 }
		reduce_crime_lvl = { amount = 4 }
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = { owner = { years_of_income = 0.50 } }
			}
		}
	}
}

# Raid from Neighbor Province
province_event = {
	id = banditry.16
	title = "banditry.16.title"
	desc = "banditry.16.desc"
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_province_modifier = {
				name = neighboring_bandits
				duration = 1825
			}
			add_devastation = 10
		}
	}

	option = {
		name = "banditry.16.option.a"
		owner = { add_prestige = -1 }
		increase_crime_lvl_medium = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.16.option.b"
		goto = banditprovince
		tooltip = {
			owner = { add_years_of_income = -0.25 }
			reduce_crime_lvl = { amount = 2 }
		}
		hidden_effect = {
			event_target:banditprovince = {
				owner = { add_years_of_income = -0.25 }
				reduce_crime_lvl = { amount = 2 }
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = { owner = { years_of_income = 0.25 } }
			}
		}
	}
}

# Bandits Expand
province_event = {
	id = banditry.17
	title = "banditry.17.title"
	desc = "banditry.17.desc"
	picture = VILLAGE_RAIDED_eventPicture

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_criminal_activity = { type = bandits }
			add_devastation = 25
		}
	}

	option = {
		name = "banditry.17.option.a"
		owner = { add_prestige = -1 }
		increase_crime_lvl_medium = yes
		ai_chance = { factor = 10 }
	}

	option = {
		name = "banditry.17.option.b"
		highlight = yes
		trigger = {
			custom_trigger_tooltip = {
				tooltip = "banditry.has_one_unit.tt"
				num_of_units_in_province = {
					amount = 1
					who = owner
				}
			}
		}
		clear_criminal_activity = { type = bandits }
		add_devastation = -10
		ai_chance = { factor = 90 }
	}
}